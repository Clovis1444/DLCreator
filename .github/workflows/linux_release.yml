name: Linux Release

on:
    workflow_dispatch:

defaults:
  run:
    shell: bash

env:
  SOURCE_DIR:   ${{ github.workspace }}
  QT_VERSION:   6.2.*
  ARTIFACT:     qt-planets-linux-build.AppImage

jobs:
  build:
    runs-on:  ubuntu-20.04

    steps:
    #   - name: Checkout repo
    #     uses: actions/checkout@v2
    #     with:
    #       submodules: recursive

    - name: Install Qt
      uses: jurplel/install-qt-action@v4
      with:
        version:      ${{ env.QT_VERSION }}
        host:         linux
        target:       desktop
        arch:         gcc_64
        dir:          ${{ runner.temp }}
        modules:      qtcharts qt3d
        setup-python: false

    - name: Check
      run: aqt list-qt linux desktop --arch 6.8.0 && echo $QT_VERSION